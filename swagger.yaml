openapi: 3.0.0
info:
  title: Gestor Financiero IA API
  version: 2.0.0
  description: |
    API avanzada con 20 caracter칤sticas de Inteligencia Artificial para gesti칩n financiera personal.
    
    ## 游 Caracter칤sticas Principales
    
    ### 游늵 PREDICCI칍N DE GASTOS (5 mejoras)
    1. Predicci칩n por categor칤a
    2. Predicci칩n mensual (30 d칤as)
    3. Detecci칩n de anomal칤as
    4. M칰ltiples modelos ML (ARIMA, Prophet, LSTM)
    5. An치lisis de estacionalidad
    
    ### 游늳 AN츼LISIS ESTAD칈STICO (5 mejoras)
    6. Correlaciones entre categor칤as
    7. An치lisis temporal (mes actual vs anterior)
    8. Clustering autom치tico de gastos
    9. Detecci칩n de tendencias
    10. Identificaci칩n de outliers (IQR + Z-Score)
    
    ### 游눠 RECOMENDACIONES DE AHORRO (5 mejoras)
    11. Metas de ahorro (objetivos espec칤ficos)
    12. Tips personalizados (basados en patrones)
    13. Alertas de presupuesto (l칤mites mensuales)
    14. Gamificaci칩n (puntuaci칩n financiera)
    15. Reportes autom치ticos (resumen semanal)
    
    ### 游늵 GR츼FICOS Y VISUALIZACI칍N (5 mejoras)
    16. Calendario de calor (Heatmap de gastos)
    17. Gr치fico Sankey (Flujo de dinero)
    18. Dashboard interactivo (Panel con filtros)
    19. Comparativas (Mes vs mes anterior)
    20. Exportar como imagen (PNG/PDF)
    
    ## 游댏 Autenticaci칩n
    
    Todos los endpoints (excepto `/auth/token` y `/health`) requieren autenticaci칩n mediante JWT.
    
    **Paso 1:** Obtener token en `/api/v2/auth/token`
    
    **Paso 2:** Incluir token en headers:
    - `Authorization: Bearer {token}` o
    - `X-API-Key: {token}`

servers:
  - url: https://api-google-colab.onrender.com
    description: Servidor de producci칩n (Render)
  - url: http://localhost:5000
    description: Servidor de desarrollo local

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key

paths:
  # ===== AUTENTICACI칍N =====
  /api/v2/auth/token:
    post:
      tags:
        - Autenticaci칩n
      summary: Generar token JWT
      description: |
        Genera un token de autenticaci칩n JWT v치lido por 24 horas.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - user_id
              properties:
                user_id:
                  type: string
                  example: "abc123xyz789"
      responses:
        '200':
          description: Token generado exitosamente
          content:
            application/json:
              schema:
                type: object
                example:
                  status: "success"
                  token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  user_id: "abc123xyz789"

  # ===== NOTIFICACIONES PUSH =====
  /api/Firebase/sendnotificacion:
    post:
      tags:
        - 游댒 Notificaciones
      summary: Enviar notificaci칩n push (sin autenticaci칩n)
      description: |
        Env칤a una notificaci칩n push a un dispositivo espec칤fico usando Firebase Cloud Messaging.
        
        **Sin necesidad de autenticaci칩n JWT**, solo necesitas el token del dispositivo.
        
        **Uso t칤pico:** Alertas del servidor, notificaciones del sistema
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - strToken
                - strTitle
                - strMessage
              properties:
                strToken:
                  type: string
                  example: "e7sJ2xK9nP3lQ5mR8vT2xZ1cA4dE6fG9hI0jK3lM5n"
                  description: Token FCM del dispositivo
                strTitle:
                  type: string
                  example: "Gasto Detectado"
                  description: T칤tulo de la notificaci칩n (m치x 100 caracteres)
                strMessage:
                  type: string
                  example: "Detectamos un gasto de $100 en Comida"
                  description: Cuerpo del mensaje (m치x 240 caracteres)
                mapData:
                  type: object
                  description: Datos adicionales personalizados (m치x 4KB)
                  example:
                    categoria: "Comida"
                    monto: "100"
                    tipo_alerta: "gasto_detectado"
                    id_transaccion: "txn_12345"
      responses:
        '200':
          description: Notificaci칩n enviada exitosamente
          content:
            application/json:
              schema:
                type: object
                example:
                  status: "success"
                  mensaje: "Notificaci칩n enviada exitosamente"
                  message_id: "0:1675849384938204%3a1234567"
                  timestamp: "2026-02-05T18:15:30.123456"
        '400':
          description: Faltan campos requeridos
          content:
            application/json:
              schema:
                type: object
                example:
                  status: "error"
                  mensaje: "Faltan campos requeridos: strToken, strTitle, strMessage"
                  code: "MISSING_FIELDS"
        '503':
          description: Firebase no disponible
          content:
            application/json:
              schema:
                type: object
                example:
                  status: "error"
                  mensaje: "Firebase no disponible"
                  code: "FIREBASE_NOT_AVAILABLE"

  /api/v2/users/{usuario_id}/send-notification:
    post:
      tags:
        - 游댒 Notificaciones
      summary: Enviar notificaci칩n a todos los dispositivos del usuario
      description: |
        Env칤a una notificaci칩n push a TODOS los dispositivos registrados de un usuario.
        
        **Requiere autenticaci칩n JWT.**
        
        **丘멆잺 IMPORTANTE:**
        - El `usuario_id` en la URL debe ser el ID real del usuario (ej: `BCc7NaZ4KQTqFY3dUxgStWH62dh2`)
        - NO pasar el JWT completo como usuario_id
        - El usuario solo puede enviar notificaciones a s칤 mismo
        
        **Uso t칤pico:** 
        - Alertas de meta alcanzada
        - Recordatorios personalizados
        - Celebraciones de logros
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
          description: ID real del usuario (NO el JWT)
          example: "BCc7NaZ4KQTqFY3dUxgStWH62dh2"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - titulo
                - cuerpo
              properties:
                titulo:
                  type: string
                  example: "춰Meta Alcanzada!"
                  description: T칤tulo de la notificaci칩n
                cuerpo:
                  type: string
                  example: "Felicidades, ahorraste $1,000 en alimentaci칩n"
                  description: Cuerpo del mensaje
                datos_extra:
                  type: object
                  description: Datos adicionales opcionales
                  example:
                    tipo: "meta_alcanzada"
                    meta_id: "meta_123"
                    monto: "1000"
      responses:
        '200':
          description: Notificaci칩n enviada exitosamente (o sin dispositivos registrados)
          content:
            application/json:
              schema:
                type: object
                example:
                  status: "success"
                  usuario_id: "BCc7NaZ4KQTqFY3dUxgStWH62dh2"
                  mensajes_enviados: 2
                  mensaje: "Notificaci칩n enviada a 2 dispositivos"
        '400':
          description: |
            - Faltan campos requeridos (titulo, cuerpo)
            - Usuario inv치lido
          content:
            application/json:
              schema:
                type: object
                example:
                  status: "error"
                  mensaje: "Faltan campos requeridos: titulo, cuerpo"
        '401':
          description: Token requerido o inv치lido
        '403':
          description: No tienes permiso para enviar notificaciones a este usuario
          content:
            application/json:
              schema:
                type: object
                example:
                  status: "error"
                  mensaje: "No tienes permiso para enviar notificaciones a este usuario"
        '503':
          description: Firebase no disponible

  # ===== PREDICCI칍N PERSONALIZADA =====
  /api/v2/users/{usuario_id}/predict-category:
    get:
      tags:
        - 游늵 Predicci칩n Personalizada
      summary: Predicci칩n de categor칤a (filtrada)
      description: |
        Predicci칩n de gastos por categor칤a espec칤fica.
        
        **Datos en Firebase:**
        ```json
        {
          "fecha": "2024-12-20",
          "monto": 85.50,
          "categoria": "Comida"
        }
        ```
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
          example: "user123"
        - name: category
          in: query
          required: false
          schema:
            type: string
          example: "Comida"
      responses:
        '200':
          description: Predicci칩n exitosa
          content:
            application/json:
              schema:
                type: object
                example:
                  status: "success"
                  usuario_id: "user123"
                  categoria: "Comida"
                  data:
                    prediccion_proximos_30_dias: 2550.75
                    gasto_promedio_diario: 85.03
                    tendencia: "estable"
        '400':
          description: Sin datos en Firebase
        '401':
          description: Token requerido o inv치lido
        '500':
          description: Error en predicci칩n

  /api/v2/users/{usuario_id}/predict-monthly:
    get:
      tags:
        - 游늵 Predicci칩n Personalizada
      summary: Predicci칩n mensual (filtrada)
      description: |
        Predicci칩n de gastos mensuales (30 d칤as).
        
        **Datos en Firebase:**
        ```json
        {
          "fecha": "2024-12-18",
          "monto": 45.00,
          "categoria": "Transporte"
        }
        ```
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
          example: "user456"
        - name: category
          in: query
          required: false
          schema:
            type: string
          example: "Transporte"
      responses:
        '200':
          description: Predicci칩n mensual exitosa
          content:
            application/json:
              schema:
                type: object
                example:
                  status: "success"
                  usuario_id: "user456"
                  categoria: "Transporte"
                  data:
                    prediccion_mes: 1350.00
                    semanas:
                      - semana: 1
                        estimado: 337.50
                      - semana: 2
                        estimado: 337.50
                      - semana: 3
                        estimado: 337.50
                      - semana: 4
                        estimado: 337.50
        '400':
          description: Sin datos en Firebase
        '401':
          description: Token requerido o inv치lido

  /api/v2/users/{usuario_id}/detect-anomalies:
    get:
      tags:
        - 游늵 Predicci칩n Personalizada
      summary: Detecci칩n de anomal칤as (filtrada)
      description: |
        Detecta gastos an칩malos o inusuales.
        
        **Datos en Firebase:**
        ```json
        {
          "fecha": "2024-12-25",
          "monto": 250.00,
          "categoria": "Entretenimiento"
        }
        ```
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
          example: "user789"
        - name: category
          in: query
          required: false
          schema:
            type: string
          example: "Entretenimiento"
      responses:
        '200':
          description: An치lisis de anomal칤as exitoso
          content:
            application/json:
              schema:
                type: object
                example:
                  status: "success"
                  usuario_id: "user789"
                  categoria: "Entretenimiento"
                  data:
                    anomalias_detectadas: 2
                    gastos_atipicos:
                      - fecha: "2024-12-25"
                        monto: 500.00
                        razon: "Valor muy alto (3x promedio)"
                      - fecha: "2024-12-10"
                        monto: 750.00
                        razon: "Valor at칤pico detectado"
                    umbral_deteccion: 150.00
        '400':
          description: Sin datos en Firebase
        '401':
          description: Token requerido o inv치lido

  /api/v2/users/{usuario_id}/analysis-complete:
    get:
      tags:
        - 游늵 Predicci칩n Personalizada
      summary: An치lisis completo personalizado
      description: |
        An치lisis completo: predicci칩n, anomal칤as, comparaci칩n de modelos y estacionalidad.
        
        **Datos en Firebase:**
        ```json
        {
          "fecha": "2024-12-22",
          "monto": 120.50,
          "categoria": "Compras"
        }
        ```
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
          example: "user999"
        - name: category
          in: query
          required: false
          schema:
            type: string
          example: "Compras"
      responses:
        '200':
          description: An치lisis completo exitoso
          content:
            application/json:
              schema:
                type: object
                example:
                  status: "success"
                  usuario_id: "user999"
                  categoria: "Compras"
                  data:
                    prediccion_categoria:
                      prediccion_proximos_30_dias: 3600.00
                    prediccion_mensual:
                      estimado_mes: 3600.00
                      por_semana: 900.00
                    anomalias:
                      detectadas: 1
                      gastos_atipicos:
                        - monto: 1500.00
                          razon: "Compra grande detectada"
                    comparacion_modelos:
                      mejor_modelo: "Prophet"
                      precision: 0.87
                    estacionalidad:
                      patron: "Semanal"
                      picos_dias: ["viernes", "s치bado"]
                    timestamp: "2026-02-05T15:30:45.123456"
        '400':
          description: Sin datos en Firebase
        '401':
          description: Token requerido o inv치lido
        '500':
          description: Error en el an치lisis

  # ===== FIREBASE INTEGRATION =====
  /api/v2/firebase/users/{usuario_id}/gastos:
    get:
      tags:
        - 游댠 Firebase Integration
      summary: Obtener gastos del usuario
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Gastos obtenidos exitosamente
    
    post:
      tags:
        - 游댠 Firebase Integration
      summary: Crear nuevo gasto
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                monto:
                  type: number
                categoria:
                  type: string
                fecha:
                  type: string
              example:
                fecha: "2024-12-20"
                monto: 85.50
                categoria: "Comida"
      responses:
        '201':
          description: Gasto creado exitosamente

  /api/v2/firebase/debug:
    get:
      tags:
        - 游댢 Debug & Utilidades
      summary: Debug de Firebase
      security: []
      responses:
        '200':
          description: Informaci칩n de debug

  # ===== AN츼LISIS PREDICTIVO (GEN칄RICOS) =====
  /api/v2/predict-category:
    get:
      tags:
        - 游늵 Predicci칩n de Gastos
      summary: Predicci칩n por categor칤a (gen칠rica)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Predicci칩n exitosa

  /api/v2/predict-monthly:
    get:
      tags:
        - 游늵 Predicci칩n de Gastos
      summary: Predicci칩n mensual (gen칠rica)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Predicci칩n exitosa

  /api/v2/detect-anomalies:
    get:
      tags:
        - 游늵 Predicci칩n de Gastos
      summary: Detecci칩n de anomal칤as (gen칠rica)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: An치lisis completado

  /api/v2/compare-models:
    get:
      tags:
        - 游늵 Predicci칩n de Gastos
      summary: Comparaci칩n de modelos (gen칠rica)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Comparaci칩n completada

  /api/v2/seasonality:
    get:
      tags:
        - 游늵 Predicci칩n de Gastos
      summary: An치lisis de estacionalidad (gen칠rica)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: An치lisis completado

  /api/v2/analysis-complete:
    get:
      tags:
        - 游늵 Predicci칩n de Gastos
      summary: An치lisis completo (gen칠rica)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: An치lisis completado

  # ===== AN츼LISIS ESTAD칈STICO =====
  /api/v2/stat/correlations:
    get:
      tags:
        - 游늳 An치lisis Estad칤stico
      summary: Correlaciones entre categor칤as
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: An치lisis de correlaciones

  /api/v2/stat/temporal-comparison:
    get:
      tags:
        - 游늳 An치lisis Estad칤stico
      summary: Comparaci칩n temporal
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Comparaci칩n temporal

  /api/v2/stat/clustering:
    get:
      tags:
        - 游늳 An치lisis Estad칤stico
      summary: Clustering de gastos
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Clustering completado

  /api/v2/stat/trends:
    get:
      tags:
        - 游늳 An치lisis Estad칤stico
      summary: Detecci칩n de tendencias
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Tendencias detectadas

  /api/v2/stat/outliers:
    get:
      tags:
        - 游늳 An치lisis Estad칤stico
      summary: Detecci칩n de outliers
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Outliers detectados

  /api/v2/stat/complete:
    get:
      tags:
        - 游늳 An치lisis Estad칤stico
      summary: An치lisis estad칤stico completo
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: An치lisis completado

  # ===== RECOMENDACIONES DE AHORRO =====
  /api/v2/savings/goals:
    get:
      tags:
        - 游눠 Recomendaciones de Ahorro
      summary: Metas de ahorro
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Metas obtenidas
    post:
      tags:
        - 游눠 Recomendaciones de Ahorro
      summary: Crear meta de ahorro
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '201':
          description: Meta creada

  /api/v2/savings/tips:
    get:
      tags:
        - 游눠 Recomendaciones de Ahorro
      summary: Tips personalizados
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Tips generados
    post:
      tags:
        - 游눠 Recomendaciones de Ahorro
      summary: Generar tips
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Tips generados

  /api/v2/savings/budget-alerts:
    get:
      tags:
        - 游눠 Recomendaciones de Ahorro
      summary: Alertas de presupuesto
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Alertas obtenidas
    post:
      tags:
        - 游눠 Recomendaciones de Ahorro
      summary: Crear alerta
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '201':
          description: Alerta creada

  /api/v2/savings/health-score:
    get:
      tags:
        - 游눠 Recomendaciones de Ahorro
      summary: Puntuaci칩n financiera
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Puntuaci칩n calculada
    post:
      tags:
        - 游눠 Recomendaciones de Ahorro
      summary: Calcular puntuaci칩n
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Puntuaci칩n calculada

  /api/v2/savings/weekly-report:
    get:
      tags:
        - 游눠 Recomendaciones de Ahorro
      summary: Reporte semanal
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Reporte generado
    post:
      tags:
        - 游눠 Recomendaciones de Ahorro
      summary: Generar reporte
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Reporte generado

  /api/v2/savings/complete:
    get:
      tags:
        - 游눠 Recomendaciones de Ahorro
      summary: An치lisis completo de ahorro
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: An치lisis completado
    post:
      tags:
        - 游눠 Recomendaciones de Ahorro
      summary: Generar an치lisis completo
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: An치lisis generado

  # ===== GR츼FICOS Y VISUALIZACI칍N =====
  /api/v2/charts/heatmap:
    get:
      tags:
        - 游늵 Gr치ficos y Visualizaci칩n
      summary: Calendario de calor
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Heatmap generado
    post:
      tags:
        - 游늵 Gr치ficos y Visualizaci칩n
      summary: Generar heatmap
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Heatmap generado

  /api/v2/charts/sankey:
    get:
      tags:
        - 游늵 Gr치ficos y Visualizaci칩n
      summary: Diagrama Sankey
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Diagrama generado
    post:
      tags:
        - 游늵 Gr치ficos y Visualizaci칩n
      summary: Generar Sankey
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Diagrama generado

  /api/v2/charts/dashboard:
    get:
      tags:
        - 游늵 Gr치ficos y Visualizaci칩n
      summary: Dashboard interactivo
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Dashboard generado
    post:
      tags:
        - 游늵 Gr치ficos y Visualizaci칩n
      summary: Generar dashboard
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Dashboard generado

  /api/v2/charts/comparison:
    get:
      tags:
        - 游늵 Gr치ficos y Visualizaci칩n
      summary: Comparaci칩n mensual
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Comparaci칩n generada
    post:
      tags:
        - 游늵 Gr치ficos y Visualizaci칩n
      summary: Generar comparaci칩n
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Comparaci칩n generada

  /api/v2/charts/export:
    get:
      tags:
        - 游늵 Gr치ficos y Visualizaci칩n
      summary: Exportar gr치ficos
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Gr치ficos exportados
    post:
      tags:
        - 游늵 Gr치ficos y Visualizaci칩n
      summary: Exportar gr치ficos
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Gr치ficos exportados

  /api/v2/charts/complete:
    get:
      tags:
        - 游늵 Gr치ficos y Visualizaci칩n
      summary: Todos los gr치ficos
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Gr치ficos generados
    post:
      tags:
        - 游늵 Gr치ficos y Visualizaci칩n
      summary: Generar todos los gr치ficos
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Gr치ficos generados

  # ===== FIREBASE INTEGRATION COMPLETA =====
  /api/v2/firebase/usuarios:
    get:
      tags:
        - 游댠 Firebase Integration
      summary: Obtener todos los usuarios
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Usuarios obtenidos

  /api/v2/firebase/usuarios/{usuario_id}:
    get:
      tags:
        - 游댠 Firebase Integration
      summary: Obtener usuario espec칤fico
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Usuario obtenido

  /api/v2/firebase/users/{usuario_id}/gastos-procesados:
    get:
      tags:
        - 游댠 Firebase Integration
      summary: Obtener gastos procesados
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Gastos procesados

  /api/v2/firebase/users/{usuario_id}/gastos-ids:
    get:
      tags:
        - 游댠 Firebase Integration
      summary: Obtener IDs de gastos
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: IDs obtenidos

  # ===== ASESOR FINANCIERO IA =====
  /api/v2/firebase/users/{usuario_id}/asesor-financiero:
    get:
      tags:
        - 游뱄 Asesor Financiero IA
      summary: An치lisis completo con IA
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: An치lisis generado

  /api/v2/firebase/users/{usuario_id}/predicciones:
    get:
      tags:
        - 游뱄 Asesor Financiero IA
      summary: Predicciones para usuario
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Predicciones generadas

  /api/v2/firebase/users/{usuario_id}/analisis:
    get:
      tags:
        - 游뱄 Asesor Financiero IA
      summary: An치lisis estad칤stico para usuario
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: An치lisis completado

  /api/v2/firebase/users/{usuario_id}/recomendaciones:
    get:
      tags:
        - 游뱄 Asesor Financiero IA
      summary: Recomendaciones para usuario
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Recomendaciones generadas

  /api/v2/firebase/users/{usuario_id}/graficos:
    get:
      tags:
        - 游뱄 Asesor Financiero IA
      summary: Gr치ficos para usuario
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Gr치ficos generados

  /api/v2/firebase/users/{usuario_id}/score:
    get:
      tags:
        - 游뱄 Asesor Financiero IA
      summary: Puntuaci칩n financiera del usuario
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Puntuaci칩n calculada

  # ===== NOTIFICACIONES =====
  /api/v2/notifications/register-device:
    post:
      tags:
        - 游댒 Notificaciones
      summary: Registrar dispositivo
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '201':
          description: Dispositivo registrado

  /api/v2/notifications/unregister-device:
    post:
      tags:
        - 游댒 Notificaciones
      summary: Desregistrar dispositivo
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Dispositivo desregistrado

  /api/v2/notifications/send:
    post:
      tags:
        - 游댒 Notificaciones
      summary: Enviar notificaci칩n
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Notificaci칩n enviada

  /api/v2/notifications/send-bulk:
    post:
      tags:
        - 游댒 Notificaciones
      summary: Enviar notificaciones masivas
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      responses:
        '200':
          description: Notificaciones enviadas

  /api/v2/notifications/history/{usuario_id}:
    get:
      tags:
        - 游댒 Notificaciones
      summary: Historial de notificaciones
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Historial obtenido

  /api/v2/notifications/send-alert/{usuario_id}:
    post:
      tags:
        - 游댒 Notificaciones
      summary: Enviar alerta a usuario
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Alerta enviada

  /api/v2/notifications/send-tips/{usuario_id}:
    post:
      tags:
        - 游댒 Notificaciones
      summary: Enviar tips a usuario
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Tips enviados

  # ===== FIREBASE USER-SPECIFIC ENDPOINTS =====
  /api/v2/firebase/users/{usuario_id}/compare-models:
    get:
      tags:
        - 游댠 Firebase Integration
      summary: Comparaci칩n de modelos (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Comparaci칩n completada

  /api/v2/firebase/users/{usuario_id}/seasonality:
    get:
      tags:
        - 游댠 Firebase Integration
      summary: An치lisis de estacionalidad (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: An치lisis completado

  # ===== FIREBASE STATS =====
  /api/v2/firebase/users/{usuario_id}/stat/correlations:
    get:
      tags:
        - 游댠 Firebase Stats
      summary: Correlaciones (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Correlaciones calculadas

  /api/v2/firebase/users/{usuario_id}/stat/temporal-comparison:
    get:
      tags:
        - 游댠 Firebase Stats
      summary: Comparaci칩n temporal (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Comparaci칩n completada

  /api/v2/firebase/users/{usuario_id}/stat/clustering:
    get:
      tags:
        - 游댠 Firebase Stats
      summary: Clustering (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Clustering completado

  /api/v2/firebase/users/{usuario_id}/stat/trends:
    get:
      tags:
        - 游댠 Firebase Stats
      summary: Tendencias (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Tendencias calculadas

  /api/v2/firebase/users/{usuario_id}/stat/outliers:
    get:
      tags:
        - 游댠 Firebase Stats
      summary: Outliers (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Outliers detectados

  /api/v2/firebase/users/{usuario_id}/stat/complete:
    get:
      tags:
        - 游댠 Firebase Stats
      summary: An치lisis estad칤stico completo (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: An치lisis completado

  # ===== FIREBASE SAVINGS =====
  /api/v2/firebase/users/{usuario_id}/savings/goals:
    get:
      tags:
        - 游댠 Firebase Savings
      summary: Metas de ahorro (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Metas obtenidas

  /api/v2/firebase/users/{usuario_id}/savings/tips:
    get:
      tags:
        - 游댠 Firebase Savings
      summary: Tips de ahorro (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Tips generados

  /api/v2/firebase/users/{usuario_id}/savings/budget-alerts:
    get:
      tags:
        - 游댠 Firebase Savings
      summary: Alertas de presupuesto (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Alertas generadas

  /api/v2/firebase/users/{usuario_id}/savings/health-score:
    get:
      tags:
        - 游댠 Firebase Savings
      summary: Puntuaci칩n de salud financiera (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Puntuaci칩n calculada

  /api/v2/firebase/users/{usuario_id}/savings/weekly-report:
    get:
      tags:
        - 游댠 Firebase Savings
      summary: Reporte semanal (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Reporte generado

  /api/v2/firebase/users/{usuario_id}/savings/complete:
    get:
      tags:
        - 游댠 Firebase Savings
      summary: An치lisis completo de ahorro (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: An치lisis completado

  # ===== FIREBASE CHARTS =====
  /api/v2/firebase/users/{usuario_id}/charts/heatmap:
    get:
      tags:
        - 游댠 Firebase Charts
      summary: Heatmap de gastos (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Heatmap generado

  /api/v2/firebase/users/{usuario_id}/charts/sankey:
    get:
      tags:
        - 游댠 Firebase Charts
      summary: Diagrama Sankey (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Diagrama generado

  /api/v2/firebase/users/{usuario_id}/charts/dashboard:
    get:
      tags:
        - 游댠 Firebase Charts
      summary: Dashboard interactivo (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Dashboard generado

  /api/v2/firebase/users/{usuario_id}/charts/comparison:
    get:
      tags:
        - 游댠 Firebase Charts
      summary: Comparaci칩n mensual (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Comparaci칩n generada

  /api/v2/firebase/users/{usuario_id}/charts/export:
    get:
      tags:
        - 游댠 Firebase Charts
      summary: Exportar gr치ficos (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Gr치ficos exportados

  /api/v2/firebase/users/{usuario_id}/charts/complete:
    get:
      tags:
        - 游댠 Firebase Charts
      summary: Todos los gr치ficos (usuario)
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: usuario_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Gr치ficos generados